<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Understanding Flood Mapping and Modeling: Bathtub, HAND, and Hydrodynamic Methods - Faezeh (Rojan)</title>
    <link rel="stylesheet" href="../../styles.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>
<body>
    <nav class="navbar">
        <div class="nav-container">
            <ul class="nav-menu">
                <li><a href="../../index.html">About Me</a></li>
                <li><a href="../../professional-contributions.html">Professional Contributions</a></li>
                <li><a href="../../research-projects.html">Research Projects</a></li>
                <li><a href="../../blog.html" class="active">Blog</a></li>
                <li><a href="../../my-toon-world.html">My Toon World</a></li>
                <li><a href="../../tools.html">Tools</a></li>
                <li><a href="../../knowledge-practice.html">Knowledge & Practice</a></li>
            </ul>
            <a href="../../index.html" class="nav-logo">
                <img src="../../logo.png" alt="FMF Logo">
            </a>
        </div>
    </nav>

    <main class="main-content">
        <div class="blog-post-container">
            <!-- LEFT SIDE: Main Post Content -->
            <article class="blog-post-full">
                <!-- Back to Blog -->
                <a href="../../blog.html" class="back-to-blog">
                    <i class="fas fa-arrow-left"></i> Back to Blog
                </a>

                <!-- Post Header -->
                <header class="post-header">
                    <h1 class="post-title-full">Understanding Flood Mapping and Modeling: Bathtub, HAND, and Hydrodynamic Methods</h1>
                    
                    <div class="post-meta-full">
                        <div class="author-info-full">
                            <img src="../../profile-photo.jpg" alt="Rojan" class="author-avatar-full">
                            <div>
                                <span class="author-name-full">Rojan</span>
                                <div class="post-details-full">
                                    <span class="post-date-full">Feb 24, 2025</span>
                                    <span class="post-dot">‚Ä¢</span>
                                    <span class="post-read-time-full">6 min read</span>
                                    </span>
                                </div>
                            </div>
                        </div>
                        
                        <div class="share-buttons">
                            <button class="share-btn" onclick="sharePost('linkedin')" title="Share on LinkedIn">
                                <i class="fab fa-linkedin"></i>
                            </button>
                            <button class="share-btn" onclick="sharePost('twitter')" title="Share on Twitter">
                                <i class="fab fa-twitter"></i>
                            </button>
                            <button class="share-btn" onclick="sharePost('facebook')" title="Share on Facebook">
                                <i class="fab fa-facebook"></i>
                            </button>
                            <button class="share-btn" onclick="copyPostLink()" title="Copy Link">
                                <i class="fas fa-link"></i>
                            </button>
                        </div>
                    </div>
                </header>

                <!-- Post Content -->
                <div class="post-content">
                    <!-- FIRST PARAGRAPH -->
                    <p>
                        Flooding poses a significant threat to communities worldwide, making accurate flood prediction essential for effective planning and risk management. Various modeling approaches exist, each with distinct strengths and limitations. This article explores three common flood modeling methods: the Bathtub Model, HAND-based (Height Above the Nearest Drainage) Model, and Hydrodynamic Models, examining their methodologies, applications, and implications for flood risk assessment.
                    </p>

                    <!-- FEATURED IMAGE (AFTER FIRST PARAGRAPH) -->
                    <div class="post-featured-image">
                        <img src="overview.png" alt="Flood Mapping and Modeling Methods">
                    </div>

                    <h2>1. The Bathtub Model: Simplicity with Limitations</h2>
                    
                    <h3>Overview and Methodology</h3>
                    <p>
                        The bathtub model represents one of the simplest approaches to flood mapping. It assumes water levels rise uniformly, similar to filling a bathtub. Any area below a specified elevation is considered flooded, making it efficient and straightforward to implement, particularly for large-scale screening assessments.
                    </p>
                    <p>
                        However, this method disregards actual water movement dynamics, which can lead to significant inaccuracies. By ignoring gravity-driven flow, friction, and drainage patterns, the bathtub model becomes less reliable for detailed flood assessments.
                    </p>

                    <h3>Equations Used</h3>
                    <p>
                        <strong>‚ùå Neither mass nor momentum equations</strong>
                    </p>
                    <p>
                        <strong>Why?</strong> The bathtub model is a static approach that assumes water rises uniformly. It does not simulate water movement and does not solve any physical equations.
                    </p>

                    <h3>Real-World Applications</h3>
                    <p>
                        Bathtub models are commonly used for coastal flood assessments, such as sea-level rise and storm surge mapping in regions like the U.S. East Coast and the Gulf of Mexico. Their simplicity allows for quick, large-scale hazard screening, often informing global or national policy assessments.
                    </p>
                    <p>
                        <strong>Data Requirements:</strong>
                    </p>
                    <ul>
                        <li>High-resolution DEMs (typically LiDAR-derived with 15-30 cm vertical accuracy)</li>
                        <li>Historical or projected water level data</li>
                        <li>GIS platforms such as ArcGIS or QGIS for implementation</li>
                    </ul>

                    <h3>Limitations and Performance</h3>
                    <p>
                        While easily scalable, bathtub models overlook critical hydrodynamic processes such as:
                    </p>
                    <ul>
                        <li>Gravity-driven water movement</li>
                        <li>Frictional losses</li>
                        <li>Natural drainage patterns</li>
                    </ul>
                    <p>
                        Studies by Sanders et al. (2024) demonstrate that bathtub models frequently overestimate flood extents, with Critical Success Index (CSI) values below 0.5, indicating poor agreement with observed flood events. This can result in misallocated resources and overlooked vulnerabilities.
                    </p>
                    <p>
                        According to the Association of State Floodplain Managers (ASFPM), while bathtub models can provide broad-scale insights, their simplified assumptions can misrepresent risks at the asset level. The ASFPM advises that users understand model limitations and avoid relying solely on bathtub models for detailed risk assessments.
                    </p>

                    <h3>The Flow-Tub Enhancement</h3>
                    <p>
                        To address these limitations, the Flow-Tub model introduces:
                    </p>
                    <ul>
                        <li><strong>Hydraulic Connectivity</strong>: Only areas with valid hydrological connections to water sources are considered flooded, avoiding false positives.</li>
                        <li><strong>Path-Based Attenuation</strong>: Water depths decrease along flow paths, reflecting real-world energy losses.</li>
                    </ul>
                    <p>
                        Field validation in the San Francisco Bay Area demonstrated that applying an attenuation factor of approximately 20 cm/km significantly improved flood depth estimates (Kasmalkar et al., 2024).
                    </p>
                    <p>
                        <strong>üí° Takeaway:</strong> The bathtub model is a good first-pass tool for screening, but it should be supplemented with more advanced methods for detailed assessments.
                    </p>

                    <h2>2. HAND-Based Models: Bridging Simplicity and Complexity</h2>
                    
                    <h3>Concept and Methodology</h3>
                    <p>
                        HAND modeling represents a middle ground between simple bathtub approaches and complex hydrodynamic models. It calculates the vertical elevation difference between any point on the landscape and its nearest drainage point. This vertical separation serves as a proxy for potential flood depth when water levels in drainage channels rise.
                    </p>

                    <h3>Equations Used</h3>
                    <p>
                        <strong>‚úÖ Mass conservation (implicitly) ‚ùå Momentum equation (not used)</strong>
                    </p>
                    <p>
                        <strong>Why?</strong> HAND is a terrain-based method that estimates flood extent based on topography and elevation differences. While it assumes water will drain following topographic gradients (implying conservation of mass), it does not explicitly solve mass conservation equations. Importantly, it does not consider velocity, acceleration, or friction, so momentum equations are not applied.
                    </p>

                    <h3>Implementation Context</h3>
                    <p>
                        HAND offers a more realistic representation of flood vulnerability compared to bathtub models (Teng et al., 2017). This approach is particularly valuable in regions with limited hydrological data but available topographic information, such as:
                    </p>
                    <ul>
                        <li>Developing countries with sparse gauging networks</li>
                        <li>Remote areas where detailed hydrodynamic modeling is impractical</li>
                        <li>Rapid response scenarios requiring quick flood mapping</li>
                    </ul>

                    <h3>Tools and Datasets</h3>
                    <p>
                        <strong>Remote Sensing and DEMs:</strong> HAND relies on DEMs to extract flow accumulation, flow direction, and drainage networks. LiDAR-derived DEMs are preferred for accuracy.
                    </p>
                    <p>
                        <strong>GIS-Based Analysis:</strong> Platforms like ArcGIS facilitate spatial hydrological and hypsometric analysis to generate HAND outputs.
                    </p>
                    <p>
                        <strong>Reference Flood Maps:</strong> HAND results are often compared with FEMA flood maps and outputs from hydrodynamic models.
                    </p>

                    <h3>Scientific Findings and Performance</h3>
                    <p>
                        Studies across diverse geographic settings have highlighted HAND's utility:
                    </p>
                    <p>
                        <strong>Accuracy:</strong> In regions with straightforward topography, HAND-based flood maps can produce inundation extents comparable to those from hydrodynamic models (Thalakkottukara et al., 2024).
                    </p>
                    <p>
                        <strong>Uncertainty:</strong> DEM resolution, discharge-stage relationships, and drainage network thresholds can influence flood depth estimates by up to 16% (Li et al., 2022).
                    </p>
                    <p>
                        <strong>Case Study:</strong> In Indonesia's Kapuas Sintang watershed, HAND facilitated multi-level flood risk classification, directly supporting local planning efforts (Purwanto & Paiman, 2023).
                    </p>
                    <p>
                        <strong>üí° Takeaway:</strong> HAND is a practical alternative when hydrodynamic modeling isn't feasible. It balances accuracy and efficiency, making it useful for regional flood assessments.
                    </p>

                    <h2>3. Hydrodynamic Models: The Gold Standard for Accuracy</h2>
                    
                    <h3>Physical Basis and Computational Approach</h3>
                    <p>
                        Hydrodynamic models provide the most detailed and realistic flood predictions. They solve mathematical equations describing water movement, capturing essential physical processes such as:
                    </p>
                    <ul>
                        <li>Momentum transfer</li>
                        <li>Pressure gradients</li>
                        <li>Frictional effects from terrain and vegetation</li>
                        <li>Time-dependent water accumulation and drainage</li>
                    </ul>

                    <h3>Governing Equations</h3>
                    <p>
                        <strong>‚úÖ Mass conservation ‚úÖ Momentum equations (Shallow Water/Navier-Stokes equations)</strong>
                    </p>
                    <p>
                        <strong>Why?</strong> Hydrodynamic models use fully dynamic equations to simulate water movement over land and through channels. They solve:
                    </p>
                    <ul>
                        <li><strong>Continuity Equation (Mass Conservation)</strong> ‚Äì Ensures that water volume is conserved throughout the domain.</li>
                        <li><strong>Momentum Equations (Shallow Water Equations or Navier-Stokes Equations)</strong> ‚Äì Accounts for forces affecting water flow, including gravity, friction, and inertia.</li>
                    </ul>

                    <h3>Implementation Requirements</h3>
                    <p>
                        While hydrodynamic models offer the highest accuracy, they also demand substantial resources:
                    </p>
                    <p>
                        <strong>Computational Infrastructure:</strong> High-performance computing is often required, particularly for large areas or fine spatial resolutions.
                    </p>
                    <p>
                        <strong>Data Inputs:</strong> Detailed information on topography, land cover, precipitation, and boundary conditions.
                    </p>
                    <p>
                        <strong>Technical Expertise:</strong> Skilled modelers are needed for setup, calibration, and interpretation.
                    </p>

                    <h3>Leading Tools and Applications</h3>
                    <ul>
                        <li><strong>HEC-RAS:</strong> Widely used for floodplain mapping and risk assessment.</li>
                        <li><strong>Delft3D-FM:</strong> Preferred for coastal and estuarine flooding, especially when river, tide, and storm surge interactions are involved.</li>
                        <li><strong>ADCIRC:</strong> Specialized for hurricane storm surge modeling along coastal regions.</li>
                    </ul>

                    <h3>Performance and Limitations</h3>
                    <p>
                        When properly calibrated, hydrodynamic models achieve high accuracy:
                    </p>
                    <p>
                        <strong>Performance:</strong> Root mean square errors (RMSE) for water depths often fall below 0.5 m in well-documented scenarios.
                    </p>
                    <p>
                        <strong>Complex Phenomena:</strong> Capable of capturing flow patterns, breach propagation, and natural channel dynamics.
                    </p>
                    <p>
                        However, challenges remain:
                    </p>
                    <ul>
                        <li><strong>Setup and Calibration:</strong> Model configuration can take weeks or months.</li>
                        <li><strong>Computational Cost:</strong> Running high-resolution simulations requires significant processing power.</li>
                        <li><strong>Data Demands:</strong> Applications in data-scarce regions are limited.</li>
                    </ul>
                    <p>
                        <strong>üí°</strong> Hydrodynamic models are indispensable for detailed, site-specific assessments, especially for infrastructure planning and emergency management.
                    </p>

                    <h2>Integrating Approaches: A Practical Framework</h2>
                    <p>
                        Rather than treating these methods as competing alternatives, modern flood risk management increasingly adopts a tiered, multi-model approach:
                    </p>
                    <ol>
                        <li><strong>Initial Screening:</strong> Bathtub or enhanced Flow-Tub models identify potentially vulnerable areas across large regions.</li>
                        <li><strong>Refined Assessment:</strong> HAND-based models provide more realistic flood extents for priority areas identified during screening.</li>
                        <li><strong>Detailed Planning:</strong> Hydrodynamic models deliver high-resolution simulations for densely populated areas or complex hydraulic environments.</li>
                    </ol>
                    <p>
                        This stepwise approach ensures efficient resource allocation while maintaining appropriate detail where it matters most.
                    </p>

                    <h2>Conclusion: Matching Models to Purpose</h2>
                    <p>
                        Flood modeling methods continue to evolve, with each approach serving specific needs:
                    </p>
                    <ul>
                        <li><strong>Bathtub Models:</strong> Suitable for high-level hazard screening but prone to overestimation due to simplified assumptions.</li>
                        <li><strong>HAND Models:</strong> A practical alternative for regions with limited data, offering more realistic flood extents than bathtub approaches.</li>
                        <li><strong>Hydrodynamic Models:</strong> The most accurate but resource-intensive, ideal for detailed site assessments and emergency planning.</li>
                    </ul>
                    <p>
                        The future of flood risk management lies in integrated modeling frameworks that balance complexity with application needs. By leveraging the strengths of each approach and acknowledging their limitations, planners, engineers, and decision-makers can develop more effective flood mitigation strategies, ultimately enhancing community resilience and public safety.
                    </p>

                    <h2>References</h2>
                    <p style="margin-left: 20px; text-indent: -20px; margin-bottom: 10px;">
                        Association of State Floodplain Managers (ASFPM). (2024). <em>Throwing the Numbers Out with the Bathwater: Understanding Flood Model Limitations.</em> Retrieved from https://www.floods.org
                    </p>
                    <p style="margin-left: 20px; text-indent: -20px; margin-bottom: 10px;">
                        Kasmalkar, I., Wagenaar, D., Bill-Weilandt, A., Bick, I. A., Nirandjan, S., Jafino, B. A., ... & Suckale, J. (2024). Flow-Tub model: A modified bathtub flood model with hydraulic connectivity and path-based attenuation. <em>MethodsX</em>, <em>12</em>, 102524. https://doi.org/10.1016/j.mex.2023.102524
                    </p>
                    <p style="margin-left: 20px; text-indent: -20px; margin-bottom: 10px;">
                        Li, Z., Mount, J., & Demir, I. (2022). Accounting for uncertainty in real-time flood inundation mapping using HAND model: Iowa case study. <em>Natural Hazards</em>, <em>112</em>(1), 977‚Äì1004. https://doi.org/10.1007/s11069-022-05215-z
                    </p>
                    <p style="margin-left: 20px; text-indent: -20px; margin-bottom: 10px;">
                        Purwanto, A., & Paiman. (2023). HAND as a Model for Rapid Flood Inundation Mapping in the Kapuas Sintang Sub Watershed. <em>Jurnal Penelitian Pendidikan IPA</em>, <em>9</em>(8), 5899‚Äì5905. https://doi.org/10.29303/jppipa.v9i8.4235
                    </p>
                    <p style="margin-left: 20px; text-indent: -20px; margin-bottom: 10px;">
                        Sanders, B. F., Wing, O. E. J., & Bates, P. D. (2024). Flooding is not like filling a bath. <em>Earth's Future</em>, <em>12</em>(1), e2023EF003466. https://doi.org/10.1029/2023EF003466
                    </p>
                    <p style="margin-left: 20px; text-indent: -20px; margin-bottom: 10px;">
                        Teng, J., Jakeman, A. J., Vaze, J., Croke, B. F. W., Dutta, D., & Kim, S. (2017). Flood inundation modelling: A review of methods, recent advances and uncertainty analysis. <em>Environmental Modelling & Software</em>, <em>90</em>, 201‚Äì216. https://doi.org/10.1016/j.envsoft.2017.01.006
                    </p>
                    <p style="margin-left: 20px; text-indent: -20px; margin-bottom: 10px;">
                        Thalakkottukara, N. T., Thomas, J., Watkins, M. K., Bhaskar, N. R., & Prasad, K. V. S. R. (2024). Suitability of the HAND model for flood inundation mapping in data-scarce regions: A comparative analysis with hydrodynamic models. <em>Earth Science Informatics</em>, <em>17</em>(3), 1907‚Äì1921. https://doi.org/10.1007/s12145-024-01243-3
                    </p>

                    <p style="margin-top: 30px; font-style: italic; color: #666;">
                        <em>Understanding the strengths and limitations of each modeling approach allows users to make informed decisions, enhancing resilience against future flood risks.</em>
                    </p>
                </div>

                <!-- Tags -->
                <div class="post-tags">
                    <span class="tag">Flood Modeling</span>
                    <span class="tag">Bathtub Model</span>
                    <span class="tag">HAND Model</span>
                    <span class="tag">Hydrodynamic Modeling</span>
                    <span class="tag">Coastal Engineering</span>
                    <span class="tag">GIS</span>
                    <span class="tag">Risk Assessment</span>
                </div>
            </article>

            <!-- RIGHT SIDE: Sidebar with Related/Newer Posts -->
            <aside class="post-sidebar">
                <!-- Recent Posts Section -->
                <div class="sidebar-section">
                    <h3 class="sidebar-title">
                        <i class="fas fa-clock"></i> Recent Posts
                    </h3>
                    <div id="newer-posts" class="sidebar-posts-list">
                        <!-- Auto-populated by JavaScript -->
                    </div>
                </div>

                <!-- Related Posts Section -->
                <div class="sidebar-section">
                    <h3 class="sidebar-title">
                        <i class="fas fa-tags"></i> Related Posts
                    </h3>
                    <div id="related-posts" class="sidebar-posts-list">
                        <!-- Auto-populated by JavaScript -->
                    </div>
                </div>
            </aside>
        </div>
    </main>

    <footer class="footer">
        <p>&copy; 2026 Faezeh (Rojan) Maghsoodifar. All rights reserved.</p>
    </footer>

    <script>
        // ============================================
        // BLOG POSTS DATABASE - ALL THREE POSTS
        // ============================================
        const allBlogPosts = [
            {
                title: "Understanding DEM, DTM, and DSM",
                url: "../../Blog/Post1/",
                date: "2025-08-05",
                tags: ["Geospatial Analysis", "DEM", "Flood Modeling", "Coastal Engineering"],
                image: "../../Blog/Post1/cover.png",
                excerpt: "Digital Elevation Models are fundamental to geospatial analysis..."
            },
            {
                title: "The Spring-Neap Cycle Requirement in Hurricane Hindcast Modeling",
                url: "../../Blog/Post2/",
                date: "2025-06-03",
                tags: ["Storm Surge", "Hurricane Modeling", "Coastal Hydrology", "Flood Modeling"],
                image: "../../Blog/Post2/cover.png",
                excerpt: "A technical analysis of why hurricane hindcasts must span complete tidal cycles..."
            },
            {
                title: "Understanding Flood Mapping and Modeling: Bathtub, HAND, and Hydrodynamic Methods",
                url: "../../Blog/Post3/",
                date: "2025-02-24",
                tags: ["Flood Modeling", "Bathtub Model", "HAND Model", "Hydrodynamic Modeling", "Coastal Engineering"],
                image: "../../Blog/Post3/cover.png",
                excerpt: "Exploring three common flood modeling methods and their applications..."
            }
        ];

        // ============================================
        // CURRENT POST CONFIGURATION - POST 3
        // ============================================
        const currentPost = {
            title: "Understanding Flood Mapping and Modeling: Bathtub, HAND, and Hydrodynamic Methods",
            date: "2025-02-24",
            tags: ["Flood Modeling", "Bathtub Model", "HAND Model", "Hydrodynamic Modeling", "Coastal Engineering"]
        };

        // ============================================
        // AUTO-POPULATE RELATED & NEWER POSTS
        // ============================================
        function populateSidebar() {
            const newerPosts = allBlogPosts
                .filter(post => post.title !== currentPost.title && new Date(post.date) > new Date(currentPost.date))
                .sort((a, b) => new Date(b.date) - new Date(a.date))
                .slice(0, 3);

            const relatedPosts = allBlogPosts
                .filter(post => {
                    if (post.title === currentPost.title) return false;
                    const sharedTags = post.tags.filter(tag => currentPost.tags.includes(tag));
                    return sharedTags.length > 0;
                })
                .map(post => {
                    const sharedTags = post.tags.filter(tag => currentPost.tags.includes(tag));
                    return { ...post, relevance: sharedTags.length };
                })
                .sort((a, b) => b.relevance - a.relevance)
                .slice(0, 3);

            const newerPostsContainer = document.getElementById('newer-posts');
            if (newerPosts.length > 0) {
                newerPostsContainer.innerHTML = newerPosts.map(post => createSidebarPostHTML(post)).join('');
            } else {
                newerPostsContainer.innerHTML = '<p class="no-posts">No newer posts yet</p>';
            }

            const relatedPostsContainer = document.getElementById('related-posts');
            if (relatedPosts.length > 0) {
                relatedPostsContainer.innerHTML = relatedPosts.map(post => createSidebarPostHTML(post)).join('');
            } else {
                relatedPostsContainer.innerHTML = '<p class="no-posts">No related posts found</p>';
            }
        }

        function createSidebarPostHTML(post) {
            const postDate = new Date(post.date).toLocaleDateString('en-US', { 
                month: 'short', 
                day: 'numeric', 
                year: 'numeric' 
            });

            return `
                <a href="${post.url}" class="sidebar-post-item">
                    <div class="sidebar-post-image">
                        <img src="${post.image}" alt="${post.title}">
                    </div>
                    <div class="sidebar-post-info">
                        <h4 class="sidebar-post-title">${post.title}</h4>
                        <span class="sidebar-post-date">
                            <i class="fas fa-calendar-alt"></i> ${postDate}
                        </span>
                    </div>
                </a>
            `;
        }

        // ============================================
        // SHARE FUNCTIONS
        // ============================================
        function sharePost(platform) {
            const title = document.querySelector('.post-title-full').textContent;
            const url = window.location.href;
            const text = encodeURIComponent(title);
            const shareUrl = encodeURIComponent(url);
            
            let shareLink = '';
            
            switch(platform) {
                case 'linkedin':
                    shareLink = `https://www.linkedin.com/sharing/share-offsite/?url=${shareUrl}`;
                    break;
                case 'twitter':
                    shareLink = `https://twitter.com/intent/tweet?text=${text}&url=${shareUrl}`;
                    break;
                case 'facebook':
                    shareLink = `https://www.facebook.com/sharer/sharer.php?u=${shareUrl}`;
                    break;
            }
            
            if (shareLink) {
                window.open(shareLink, '_blank', 'width=600,height=400');
            }
        }

        function copyPostLink() {
            const url = window.location.href;
            
            navigator.clipboard.writeText(url).then(() => {
                const notification = document.createElement('div');
                notification.className = 'copy-notification';
                notification.textContent = '‚úì Link copied to clipboard!';
                document.body.appendChild(notification);
                
                setTimeout(() => {
                    notification.classList.add('show');
                }, 10);
                
                setTimeout(() => {
                    notification.classList.remove('show');
                    setTimeout(() => {
                        document.body.removeChild(notification);
                    }, 300);
                }, 2000);
            });
        }

        // ============================================
        // AUTOMATIC VIEW COUNTER
        // ============================================
        function initializeViewCounter() {
            const postId = window.location.pathname.replace(/\//g, '-').replace('.html', '');
            const storageKey = `post-views-${postId}`;
            
            const lastView = localStorage.getItem(`${storageKey}-timestamp`);
            const now = Date.now();
            const oneDayInMs = 24 * 60 * 60 * 1000;
            
            if (!lastView || (now - parseInt(lastView)) > oneDayInMs) {
                incrementViewCount(postId);
                localStorage.setItem(`${storageKey}-timestamp`, now.toString());
            } else {
                loadViewCount(postId);
            }
        }
        
        function incrementViewCount(postId) {
            const apiUrl = `https://api.countapi.xyz/hit/faezemqfr.github.io/${postId}`;
            
            fetch(apiUrl)
                .then(response => response.json())
                .then(data => {
                    updateViewDisplay(data.value);
                })
                .catch(error => {
                    console.log('View counter unavailable');
                    fallbackViewCounter(postId);
                });
        }
        
        function loadViewCount(postId) {
            const apiUrl = `https://api.countapi.xyz/get/faezemqfr.github.io/${postId}`;
            
            fetch(apiUrl)
                .then(response => response.json())
                .then(data => {
                    if (data.value) {
                        updateViewDisplay(data.value);
                    }
                })
                .catch(error => {
                    console.log('View counter unavailable');
                });
        }
        
        function updateViewDisplay(count) {
            const viewCountElement = document.querySelector('.view-count-full');
            if (viewCountElement) {
                viewCountElement.innerHTML = `<i class="fas fa-eye"></i> ${count} views`;
            }
        }
        
        function fallbackViewCounter(postId) {
            const storageKey = `post-views-${postId}`;
            let views = parseInt(localStorage.getItem(storageKey)) || 0;
            views++;
            localStorage.setItem(storageKey, views.toString());
            updateViewDisplay(views);
        }

        // ============================================
        // INITIALIZE ALL
        // ============================================
        document.addEventListener('DOMContentLoaded', function() {
            populateSidebar();
            initializeViewCounter();
        });
    </script>
</body>
</html>
